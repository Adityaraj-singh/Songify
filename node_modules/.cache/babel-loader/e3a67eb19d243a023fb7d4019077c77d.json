{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\adity\\\\tuner\\\\src\\\\Components\\\\player.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useRef } from 'react';\nimport './MyStyle.css';\nimport { Nav, Form, Row, Col } from 'react-bootstrap';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { BiSkipPrevious, BiPlay, BiSkipNext, BiPause } from 'react-icons/bi';\nimport { AiOutlineShrink } from 'react-icons/ai';\nimport { FiMaximize2 } from 'react-icons/fi';\nimport axios from 'axios';\nimport { Container, ProgressBar } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Player({\n  songs,\n  currentsongindex,\n  Setcurrentsongindex,\n  nextsongindex,\n  Setnextsongindex,\n  playing,\n  Setplaying,\n  minplayer,\n  Setminplayer\n}) {\n  _s();\n\n  const [showing, Setshowing] = useState('visible');\n  var current = {\n    'position': 'relative',\n    'backgroundImage': 'url(' + process.env.PUBLIC_URL + songs[currentsongindex].photo + ')'\n  };\n  const [temp, Settemp] = useState(0);\n  const url = 'http://localhost:8000/';\n  const temp_songs = songs;\n  const [main_player, Setmain_player] = useState({\n    position: 'relative',\n    top: '-552px'\n  });\n  const [playerstyle, Setplayerstyle] = useState({\n    visibility: 'visible'\n  });\n  const [controlstyle, Setcontrolstyle] = useState({\n    position: 'relative',\n    top: '20px'\n  });\n  const [titlestyle, Settitlestyle] = useState({\n    position: 'relative',\n    top: '5px',\n    'font-style': 'xx-large'\n  });\n  const [playergeometry, Setplayergeometry] = useState({\n    width: '350px',\n    height: '570px'\n  });\n  const audioEl = useRef(0);\n  const [initialtime, Setinitialtime] = useState('00:00');\n  const [finaltime, Setfinaltime] = useState('00:00');\n  const timerRef = useRef();\n  const rangevalue = useRef();\n  const progressref = useRef(); // Subtitle Variables\n\n  const [subtitle, Setsubtitle] = useState();\n  const [subtitleline, Setsubtitleline] = useState('music');\n  const sub_time_pattern = /[0-9]+:[0-9]+:[0-9]+,[0-9]/g;\n  const time_indexes_var = '';\n  const [time_indexes, settime_indexes] = useState(time_indexes_var);\n  const [subindex, Setsubindex] = useState(0);\n  const [subsintime, Setsubsintime] = useState('');\n  const [subsouttime, Setsubsouttime] = useState('');\n  const [seconds, Setseconds] = useState(0);\n\n  function timerchange() {\n    Setinitialtime(initialtime + 1);\n  }\n\n  const nextinedexing = nextsongindex => {\n    if (currentsongindex + 1 > songs.length - 1) {\n      return 0;\n    } else {\n      return currentsongindex + 1;\n    }\n  };\n\n  if (document.getElementById('progress_div')) {\n    //onlcick progressbar\n    document.getElementById('progress_div').addEventListener('click', event => {\n      const {\n        duration\n      } = audioEl.current;\n      let move_progress = event.offsetX / event.srcElement.clientWidth * duration;\n      audioEl.current.currentTime = move_progress;\n    }, {\n      once: true\n    });\n\n    if (seconds == 10) {\n      Setseconds(prevSecond => prevSecond * 0);\n    }\n  }\n\n  if (document.getElementById('progress_div')) {\n    audioEl.current.addEventListener('timeupdate', event => {\n      const {\n        currentTime,\n        duration\n      } = event.srcElement; //total duration\n\n      var progress_time = currentTime / duration * 100;\n      document.getElementById('progresses').style.width = `${progress_time}%`;\n      let minute_duration = Math.floor(duration / 60);\n      let second_duration = Math.floor(duration % 60);\n\n      if (second_duration < 10) {\n        second_duration = `0${second_duration}`;\n      }\n\n      if (duration) {\n        Setfinaltime(`${minute_duration}:${second_duration}`);\n      } //current time\n\n\n      var minute_current = Math.floor(currentTime / 60);\n      var second_current = Math.floor(currentTime % 60);\n\n      if (minute_current < 10) {\n        minute_current = `0${minute_current}`;\n      }\n\n      if (second_current < 10) {\n        second_current = `0${second_current}`;\n      } //MATCHING TIME WITH LYRICS\n\n\n      let song_time_pattern = `00:${minute_current}:${second_current},${seconds}`;\n      let time_of_subtitle = `${subsintime}[0-9]* --> ${subsouttime}[0-9]*`;\n      let reg = '(?<=' + time_of_subtitle + String.raw`\\n` + '*' + String.raw`\\s+` + ').*' + String.raw`\\n` + '.*.?(?=' + ')';\n      reg = RegExp(reg);\n\n      if (time_indexes) {\n        if (song_time_pattern == time_indexes[subindex]) {\n          if (subtitle.match(reg)) {\n            Setsubtitleline(subtitle.match(reg)[0]);\n          } //console.log(subindex)\n\n\n          Setsubindex(subindex + 2);\n        }\n      } //console.log(song_time_pattern)\n      // console.log(current_patterned_time)\n\n\n      if (currentTime) {\n        Setinitialtime(`${minute_current}:${second_current}`);\n      }\n\n      if (currentTime == duration) {\n        Setcurrentsongindex(currentsongindex + 1);\n      }\n    });\n  }\n\n  useEffect(() => {\n    if (playing) {\n      audioEl.current.play();\n    } else {\n      audioEl.current.pause();\n    }\n\n    Setnextsongindex(nextinedexing(nextsongindex));\n  }, [playing, currentsongindex]); // getting Subtitles\n\n  useEffect(() => {\n    axios.get(`${url}order/${currentsongindex}`).then(response => {\n      Setsubtitle(response.data);\n    }).catch(error => {\n      console.log(error);\n    });\n  }, [currentsongindex]); //when sub index changges\n\n  useEffect(() => {\n    if (time_indexes) {\n      Setsubsintime(time_indexes[subindex]);\n      Setsubsouttime(time_indexes[subindex + 1]);\n    }\n  }, [subindex]); //when subtitlev changes\n\n  useEffect(() => {\n    if (subtitle) {\n      settime_indexes(subtitle.match(sub_time_pattern));\n    }\n\n    Setsubindex(0);\n    Setsubsintime('00:00:00,0');\n    Setsubsouttime('00:00:00,0');\n  }, [subtitle]);\n  useEffect(() => {\n    if (time_indexes) {\n      let interval = null;\n      interval = setInterval(() => {\n        Setseconds(prevTime => prevTime + 1);\n      }, 100);\n      return () => {\n        clearInterval(interval);\n      };\n    }\n  }, [time_indexes]); //minimze/maximize\n\n  const minimize = () => {\n    Setplayerstyle({\n      visibility: 'hidden'\n    });\n    document.getElementById('detail-image').style.height = \"50px\";\n    document.getElementById('detail-image').style.width = \"50px\";\n    document.getElementById('detail-image').style.position = \"relative\";\n    document.getElementById('detail-image').style.top = \"-70px\";\n    document.getElementById('detail-image').style.left = \"-120px\";\n    document.getElementById('detail-image').style.border = \"0.8px solid white\";\n    document.getElementById('progress_div').style.left = '10px';\n    document.getElementById('progress_div').style.top = '-200px';\n    document.getElementById('progress_div').style.position = 'relative';\n    document.getElementById('progress_div').style.height = '0.14rem';\n    Setshowing('hidden');\n    Setplayergeometry({\n      width: '350px',\n      height: '100px'\n    });\n    Setcontrolstyle({\n      position: 'relative',\n      width: '350px',\n      top: '-260px',\n      left: \"10px\"\n    });\n    Settitlestyle({\n      position: 'relative',\n      'top': '-72px',\n      'width': '50%',\n      'font-size': '15px',\n      'font-weight': 'bold',\n      width: '350px',\n      left: \"10px\"\n    });\n    Setmain_player({\n      position: 'relative',\n      top: '-90px'\n    });\n    Setminplayer(!minplayer);\n    document.getElementById('playerbox').style.borderRadius = \"30px\";\n  };\n\n  const maximize = () => {\n    document.getElementById('detail-image').style.height = \"180px\";\n    document.getElementById('detail-image').style.width = \"180px\";\n    document.getElementById('detail-image').style.top = \"0px\";\n    document.getElementById('detail-image').style.left = \"0px\";\n    document.getElementById('detail-image').style.border = \"2px solid white\";\n    document.getElementById('progress_div').style.height = '0.4rem';\n    document.getElementById('progress_div').style.left = '0px';\n    document.getElementById('progress_div').style.top = '00px';\n    document.getElementById('playerbox').style.borderRadius = \"10px\";\n    Setplayerstyle({\n      visibility: 'visible'\n    });\n    Setshowing('visible');\n    Setplayergeometry({\n      width: '350px',\n      height: '558px'\n    });\n    Setcontrolstyle({\n      position: 'relative'\n    });\n    Settitlestyle({\n      position: 'relative'\n    });\n    Setmain_player({\n      position: 'relative',\n      top: '-552px'\n    });\n    Setminplayer(!minplayer);\n  };\n\n  const skip = (forwards = true) => {\n    document.getElementById('progresses').style.width = '0%';\n    audioEl.current.currentTime = 0;\n\n    if (forwards) {\n      Setcurrentsongindex(() => {\n        Setinitialtime(0);\n        let temp = currentsongindex;\n        temp = temp + 1;\n\n        if (temp > songs.length - 1) {\n          temp = 0;\n        }\n\n        return temp;\n      });\n    } else {\n      Setcurrentsongindex(() => {\n        let temp = currentsongindex;\n        temp = temp - 1;\n\n        if (temp < 0) {\n          temp = songs.length - 1;\n        }\n\n        return temp;\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"main-player items-center\",\n    style: main_player,\n    children: /*#__PURE__*/_jsxDEV(\"center\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"player-box    space-y-2 shadow-2xl\",\n        id: \"playerbox\",\n        style: playergeometry,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"top-controls p-1\",\n          children: !minplayer ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: minimize,\n            children: /*#__PURE__*/_jsxDEV(AiOutlineShrink, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 66\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 39\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: maximize,\n            children: /*#__PURE__*/_jsxDEV(FiMaximize2, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 403,\n              columnNumber: 135\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 106\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"player-heading\",\n          style: playerstyle,\n          children: [/*#__PURE__*/_jsxDEV(\"audio\", {\n            id: \"audio\",\n            src: process.env.PUBLIC_URL + songs[currentsongindex].src,\n            ref: audioEl,\n            preload: \"auto\",\n            children: /*#__PURE__*/_jsxDEV(\"track\", {\n              default: true,\n              src: process.env.PUBLIC_URL + '/Media/Subtitles/bad_liar.vtt'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 407,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 406,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"font-extralight text-3xl \",\n            children: /*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Playing now\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 409,\n              columnNumber: 62\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 409,\n            columnNumber: 20\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"detail-image\",\n          id: \"detail-image\",\n          style: current\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 411,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"center\", {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"song-title \",\n            id: \"songtitle\",\n            style: titlestyle,\n            children: /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: minplayer == false ? \"font-bold\" : null,\n              children: songs[currentsongindex].title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 415,\n              columnNumber: 26\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 414,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"song-artist\",\n          style: playerstyle,\n          children: /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"font-bold text-xs\",\n            id: \"artist-text\",\n            children: songs[currentsongindex].artist\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bars p-1\",\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              xs: 2,\n              style: playerstyle,\n              children: initialtime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: 8,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress_div\",\n                id: \"progress_div\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progresses\",\n                  id: \"progresses\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 426,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 425,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              xs: 2,\n              style: playerstyle,\n              children: finaltime\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-gray-400\",\n          id: \"lyrics\",\n          style: playerstyle,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              children: subtitleline\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 48\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 439,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"controls space-x-3 p-2\",\n          id: \"controls\",\n          style: controlstyle,\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"skipperbtn\",\n            onClick: () => skip(false),\n            children: /*#__PURE__*/_jsxDEV(BiSkipPrevious, {\n              className: \"skip-button \",\n              id: \"skip-button\",\n              size: 25\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 442,\n              columnNumber: 71\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 20\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"skipperbtn\",\n            onClick: () => skip(false),\n            children: /*#__PURE__*/_jsxDEV(BiSkipPrevious, {\n              className: \"skip-button \",\n              id: \"skip-button\",\n              size: 30\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 443,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"outline-none\",\n            id: \"play-button\",\n            onClick: () => Setplaying(!playing),\n            children: !playing ? /*#__PURE__*/_jsxDEV(BiPlay, {\n              id: \"play-icon\",\n              className: \"bg-white rounded-full\",\n              size: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 121\n            }, this) : /*#__PURE__*/_jsxDEV(BiPause, {\n              id: \"play-icon\",\n              className: \"bg-white rounded-full text-green-800 \",\n              size: 40\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 444,\n              columnNumber: 192\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 444,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"skipperbtn\",\n            onClick: () => skip(true),\n            children: /*#__PURE__*/_jsxDEV(BiSkipNext, {\n              className: \"skip-button  \",\n              id: \"skip-button\",\n              size: 30\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 445,\n              columnNumber: 73\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 445,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            id: \"skipperbtn\",\n            onClick: () => skip(false),\n            children: /*#__PURE__*/_jsxDEV(BiSkipPrevious, {\n              className: \"skip-button \",\n              id: \"skip-button\",\n              size: 25\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 446,\n              columnNumber: 75\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 446,\n            columnNumber: 24\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 20\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-md next-song\",\n          id: \"next-song\",\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Next up:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 71\n          }, this), songs[nextsongindex].title]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"trademark\",\n          style: playerstyle,\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-xs font-mono\",\n            children: /*#__PURE__*/_jsxDEV(\"i\", {\n              children: \"a deadshot production\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 453,\n              columnNumber: 54\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 453,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 452,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 399,\n      columnNumber: 30\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 398,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Player, \"+eXPdJaMN7+iDEEviJRsX2O4+SI=\");\n\n_c = Player;\nexport default Player;\n\nvar _c;\n\n$RefreshReg$(_c, \"Player\");","map":{"version":3,"sources":["C:/Users/adity/tuner/src/Components/player.js"],"names":["React","useState","useEffect","useRef","Nav","Form","Row","Col","BiSkipPrevious","BiPlay","BiSkipNext","BiPause","AiOutlineShrink","FiMaximize2","axios","Container","ProgressBar","Player","songs","currentsongindex","Setcurrentsongindex","nextsongindex","Setnextsongindex","playing","Setplaying","minplayer","Setminplayer","showing","Setshowing","current","process","env","PUBLIC_URL","photo","temp","Settemp","url","temp_songs","main_player","Setmain_player","position","top","playerstyle","Setplayerstyle","visibility","controlstyle","Setcontrolstyle","titlestyle","Settitlestyle","playergeometry","Setplayergeometry","width","height","audioEl","initialtime","Setinitialtime","finaltime","Setfinaltime","timerRef","rangevalue","progressref","subtitle","Setsubtitle","subtitleline","Setsubtitleline","sub_time_pattern","time_indexes_var","time_indexes","settime_indexes","subindex","Setsubindex","subsintime","Setsubsintime","subsouttime","Setsubsouttime","seconds","Setseconds","timerchange","nextinedexing","length","document","getElementById","addEventListener","event","duration","move_progress","offsetX","srcElement","clientWidth","currentTime","once","prevSecond","progress_time","style","minute_duration","Math","floor","second_duration","minute_current","second_current","song_time_pattern","time_of_subtitle","reg","String","raw","RegExp","match","play","pause","get","then","response","data","catch","error","console","log","interval","setInterval","prevTime","clearInterval","minimize","left","border","borderRadius","maximize","skip","forwards","src","title","artist"],"mappings":"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","sourcesContent":["import React,{useState,useEffect,useRef} from 'react'\r\nimport './MyStyle.css';\r\nimport {Nav,Form,Row,Col} from 'react-bootstrap'\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { BiSkipPrevious,BiPlay,BiSkipNext,BiPause } from 'react-icons/bi';\r\nimport {AiOutlineShrink} from 'react-icons/ai'\r\nimport {FiMaximize2} from 'react-icons/fi'\r\nimport axios from 'axios'\r\nimport {Container,ProgressBar} from 'react-bootstrap'\r\nfunction Player({songs,currentsongindex,Setcurrentsongindex,nextsongindex,Setnextsongindex,playing,Setplaying,minplayer,Setminplayer}){\r\n    const [showing,Setshowing]=useState('visible')\r\nvar current={\r\n    'position':'relative',\r\n    'backgroundImage':'url('+process.env.PUBLIC_URL+songs[currentsongindex].photo+')',\r\n    \r\n}\r\n\r\n\r\n\r\nconst [temp,Settemp]=useState(0)\r\nconst url='http://localhost:8000/'\r\n\r\nconst temp_songs=songs\r\n\r\nconst [main_player,Setmain_player]=useState({\r\n    position: 'relative',\r\n    top:'-552px'\r\n})\r\n\r\nconst [playerstyle,Setplayerstyle]=useState({\r\n    visibility:'visible'\r\n}) \r\nconst [controlstyle,Setcontrolstyle]=useState({\r\n    position:'relative',\r\n    top:'20px' \r\n})\r\n\r\nconst [titlestyle,Settitlestyle]=useState({\r\n    position: 'relative',\r\n    top:'5px',\r\n    'font-style':'xx-large'\r\n})\r\nconst [playergeometry,Setplayergeometry]=useState({\r\n    width: '350px',\r\n    height: '570px'\r\n})\r\nconst audioEl=useRef(0)\r\nconst [initialtime,Setinitialtime]=useState('00:00')\r\nconst [finaltime,Setfinaltime]=useState('00:00')\r\nconst timerRef=useRef()\r\nconst rangevalue=useRef()\r\nconst progressref=useRef()\r\n// Subtitle Variables\r\nconst [subtitle,Setsubtitle]=useState()\r\nconst [subtitleline,Setsubtitleline]=useState('music')\r\nconst sub_time_pattern=/[0-9]+:[0-9]+:[0-9]+,[0-9]/g\r\nconst time_indexes_var=''\r\nconst [time_indexes,settime_indexes]=useState(time_indexes_var)\r\n\r\nconst [subindex,Setsubindex]=useState(0)\r\nconst [subsintime,Setsubsintime]=useState('')\r\nconst [subsouttime,Setsubsouttime]=useState('')\r\nconst [seconds,Setseconds]=useState(0)\r\nfunction timerchange(){\r\n    Setinitialtime(initialtime+1)\r\n}\r\nconst nextinedexing=(nextsongindex)=>{\r\n  \r\n    if(currentsongindex+1>songs.length-1){\r\n        return 0 ;\r\n    }\r\n    else{\r\n        \r\n        return currentsongindex+1;\r\n    }\r\n}\r\n\r\n\r\n\r\nif(document.getElementById('progress_div'))\r\n{\r\n    //onlcick progressbar\r\n    document.getElementById('progress_div').addEventListener('click',(event)=>{\r\n        const {duration}=audioEl.current\r\n       let move_progress=(event.offsetX / event.srcElement.clientWidth) * duration\r\n       audioEl.current.currentTime=move_progress\r\n        \r\n    },{once:true})\r\n  \r\n    \r\n\r\n    if(seconds==10) \r\n    {\r\n        Setseconds(prevSecond=>prevSecond*0)\r\n    }\r\n    \r\n\r\n}\r\n\r\n    if(document.getElementById('progress_div'))\r\n    {\r\n        \r\n    audioEl.current.addEventListener('timeupdate',(event)=>{\r\n    \r\n        const {currentTime,duration}=event.srcElement\r\n        //total duration\r\n        var progress_time=(currentTime/duration) * 100\r\n        document.getElementById('progresses').style.width=`${progress_time}%`\r\n        let minute_duration=Math.floor(duration / 60)\r\n        let second_duration=Math.floor(duration % 60)\r\n        if(second_duration<10)\r\n        {\r\n            second_duration=`0${second_duration}`\r\n        }\r\n        if(duration)\r\n        {\r\n            Setfinaltime(`${minute_duration}:${second_duration}`)\r\n        }\r\n\r\n\r\n        //current time\r\n        \r\n        var minute_current=Math.floor(currentTime / 60)\r\n        var second_current=Math.floor(currentTime % 60)\r\n        if(minute_current<10)\r\n        {\r\n            minute_current=`0${minute_current}`\r\n        }\r\n    \r\n    \r\n        if(second_current<10)\r\n        {\r\n            second_current=`0${second_current}`\r\n        }\r\n        //MATCHING TIME WITH LYRICS\r\n\r\n\r\n       let song_time_pattern=`00:${minute_current}:${second_current},${seconds}`\r\n       \r\n       let time_of_subtitle=`${subsintime}[0-9]* --> ${subsouttime}[0-9]*`\r\n       let reg='(?<='+time_of_subtitle+String.raw`\\n`+'*'+ String.raw`\\s+` + ').*'+String.raw`\\n`+'.*.?(?='+')'\r\n       reg= RegExp(reg)\r\n    \r\n       if(time_indexes)\r\n       {\r\n\r\n        if(song_time_pattern==time_indexes[subindex])\r\n        {\r\n            \r\n        \r\n           if(subtitle.match(reg))\r\n           {\r\n            \r\n            Setsubtitleline(subtitle.match(reg)[0])\r\n            \r\n\r\n           } \r\n           //console.log(subindex)\r\n           Setsubindex(subindex+2)  \r\n        }\r\n\r\n       } \r\n      \r\n\r\n       //console.log(song_time_pattern)\r\n      // console.log(current_patterned_time)\r\n        \r\n        if(currentTime)\r\n        {\r\n            Setinitialtime(`${minute_current}:${second_current}`)\r\n        }\r\n        if(currentTime==duration){\r\n            Setcurrentsongindex(currentsongindex+1)\r\n        }\r\n        \r\n       }) \r\n\r\n        \r\n}\r\n\r\n\r\nuseEffect(()=>{\r\n\r\n    \r\n    if(playing){\r\n\r\n        audioEl.current.play()  \r\n    }\r\n    else{\r\n        audioEl.current.pause()\r\n    }\r\n    Setnextsongindex(nextinedexing(nextsongindex))  \r\n\r\n   \r\n},[playing,currentsongindex])\r\n\r\n\r\n\r\n// getting Subtitles\r\nuseEffect(()=>{\r\n\r\n    \r\n    \r\n    axios.get(`${url}order/${currentsongindex}`)\r\n    .then((response) => {\r\n\r\n   Setsubtitle(response.data)\r\n   \r\n        \r\n  \r\n  })\r\n    .catch(error=>{\r\n        console.log(error)\r\n    })\r\n\r\n     \r\n\r\n\r\n},[currentsongindex])\r\n\r\n\r\n//when sub index changges\r\nuseEffect(()=>{\r\n    if(time_indexes)\r\n\r\n    {\r\n        Setsubsintime(time_indexes[subindex])\r\n    Setsubsouttime(time_indexes[subindex+1])\r\n    }\r\n},[subindex])\r\n\r\n\r\n//when subtitlev changes\r\nuseEffect(()=>{\r\n\r\n    if(subtitle)\r\n    {   \r\n        settime_indexes(subtitle.match(sub_time_pattern))\r\n      \r\n    }\r\n\r\n   \r\nSetsubindex(0)\r\n\r\nSetsubsintime('00:00:00,0')\r\nSetsubsouttime('00:00:00,0')\r\n\r\n\r\n},[subtitle])\r\n\r\nuseEffect(()=>{\r\n    \r\n\r\n    if(time_indexes)\r\n    {\r\n        let interval=null\r\n\r\n        interval=setInterval(() => {\r\n            Setseconds(prevTime=>prevTime+1)               \r\n        \r\n    },100);\r\n    return ()=>{ clearInterval(interval)}\r\n    }\r\n     \r\n},[time_indexes])\r\n\r\n\r\n\r\n//minimze/maximize\r\nconst minimize=()=>{\r\n    Setplayerstyle({\r\n        visibility:'hidden'\r\n    })\r\n    \r\n    document.getElementById('detail-image').style.height=\"50px\"\r\n    document.getElementById('detail-image').style.width=\"50px\"\r\n    document.getElementById('detail-image').style.position=\"relative\"\r\n    document.getElementById('detail-image').style.top=\"-70px\"\r\n    document.getElementById('detail-image').style.left=\"-120px\"\r\n    document.getElementById('detail-image').style.border=\"0.8px solid white\"\r\n    \r\n\r\n    document.getElementById('progress_div').style.left='10px'\r\n    document.getElementById('progress_div').style.top='-200px'\r\n    document.getElementById('progress_div').style.position='relative'\r\n    document.getElementById('progress_div').style.height='0.14rem'\r\n\r\n\r\n  \r\n\r\n    Setshowing('hidden')\r\n\r\n    Setplayergeometry({\r\n        width: '350px',\r\n        height: '100px',  \r\n    })\r\n\r\n    Setcontrolstyle({\r\n        position:'relative',\r\n       width:'350px',\r\n       top:'-260px' ,\r\n       left:\"10px\"       \r\n    })\r\n\r\n    Settitlestyle({\r\n        position: 'relative',\r\n      'top': '-72px',\r\n      'width':'50%',\r\n   'font-size':'15px',\r\n   'font-weight':'bold',\r\n    width: '350px',\r\n    left:\"10px\"  \r\n    })\r\n\r\nSetmain_player({\r\n    position:'relative',\r\n    top:'-90px'\r\n})\r\n\r\n   Setminplayer(!minplayer)\r\n   document.getElementById('playerbox').style.borderRadius = \"30px\"\r\n}\r\nconst maximize=()=>{\r\n\r\n    document.getElementById('detail-image').style.height=\"180px\"\r\n    document.getElementById('detail-image').style.width=\"180px\"\r\n    document.getElementById('detail-image').style.top=\"0px\"\r\n    document.getElementById('detail-image').style.left=\"0px\"\r\n    document.getElementById('detail-image').style.border=\"2px solid white\"\r\n\r\n\r\n    document.getElementById('progress_div').style.height='0.4rem'\r\n    document.getElementById('progress_div').style.left='0px'\r\n    document.getElementById('progress_div').style.top='00px'\r\n\r\n    document.getElementById('playerbox').style.borderRadius = \"10px\"\r\n    Setplayerstyle({\r\n        visibility:'visible'\r\n    })\r\n\r\n    Setshowing('visible')\r\n\r\n    Setplayergeometry({\r\n        width: '350px',\r\n        height: '558px'\r\n    })\r\n\r\n    Setcontrolstyle({\r\n        position:'relative',\r\n        \r\n        \r\n    })\r\n\r\n    Settitlestyle({\r\n        position: 'relative',\r\n    })\r\n\r\n    Setmain_player({\r\n        position: 'relative',\r\n        top:'-552px' \r\n    })\r\n    Setminplayer(!minplayer)\r\n}\r\n\r\nconst skip=(forwards=true)=>{\r\n    \r\n    document.getElementById('progresses').style.width='0%'\r\n    audioEl.current.currentTime=0\r\n     if(forwards){\r\n        Setcurrentsongindex(()=>{\r\n            Setinitialtime(0)\r\n             let temp=currentsongindex\r\n             temp=temp+1;\r\n\r\n             if(temp>songs.length-1){\r\n               \r\n                 temp=0\r\n             }        \r\n             return temp\r\n         })\r\n        \r\n     }\r\n     else{\r\n         Setcurrentsongindex(()=>{\r\n             let temp=currentsongindex\r\n             temp=temp-1;\r\n\r\n             if(temp<0){\r\n                 temp=songs.length-1\r\n             }\r\n                return temp\r\n         })   \r\n     } \r\n \r\n}\r\nreturn(\r\n  \r\n    <div className=\"main-player items-center\" style={main_player}>\r\n                             <center>\r\n                                \r\n                    <div className=\"player-box    space-y-2 shadow-2xl\" id=\"playerbox\" style={playergeometry}>\r\n                        <div className=\"top-controls p-1\">\r\n                        {!minplayer ? <button onClick={minimize}><AiOutlineShrink size={20}/></button> : <button  onClick={maximize} ><FiMaximize2 size={20} /></button> }\r\n                        </div>\r\n                    <div className=\"player-heading\" style={playerstyle}>\r\n                        <audio id=\"audio\"  src={process.env.PUBLIC_URL+songs[currentsongindex].src}  ref={audioEl} preload=\"auto\">\r\n                            <track default src={process.env.PUBLIC_URL+'/Media/Subtitles/bad_liar.vtt'}></track>\r\n                            </audio>                       \r\n                   <h2 className=\"font-extralight text-3xl \"><strong>Playing now</strong></h2>\r\n                   </div>\r\n                   <div className=\"detail-image\" id=\"detail-image\" style={current} >\r\n                   </div>\r\n                   <center>\r\n                   <div className=\"song-title \" id=\"songtitle\" style={titlestyle}>\r\n                         <h1 className={minplayer==false ? \"font-bold\": null}>{songs[currentsongindex].title}</h1>\r\n                    </div>\r\n                    </center>\r\n                    <div className=\"song-artist\" style={playerstyle}>\r\n                        <h4 className=\"font-bold text-xs\" id=\"artist-text\">{songs[currentsongindex].artist}</h4>\r\n                    </div>\r\n                   <div className=\"progress-bars p-1\" >\r\n                   <Row>\r\n                            <Col xs={2} style={playerstyle} >{initialtime}</Col>\r\n                            <Col xs={8}>\r\n                                <div className=\"progress_div\" id=\"progress_div\" >\r\n                                    <div className=\"progresses\" id=\"progresses\" >\r\n                                        \r\n                                    </div>\r\n\r\n                                </div>\r\n                                </Col>\r\n                            <Col xs={2} style={playerstyle}>{finaltime}</Col>\r\n                        </Row>\r\n                        \r\n                   \r\n                   </div>\r\n\r\n                   <div className=\"bg-gray-400\" id=\"lyrics\" style={playerstyle}>\r\n                        <p className=\"text-sm\"><i>{subtitleline}</i></p>\r\n                    </div>\r\n                   <div className=\"controls space-x-3 p-2\" id=\"controls\" style={controlstyle}>\r\n                   <button  id=\"skipperbtn\" onClick={()=>skip(false)}><BiSkipPrevious className=\"skip-button \" id=\"skip-button\"  size={25}/></button>\r\n                       <button  id=\"skipperbtn\" onClick={()=>skip(false)}><BiSkipPrevious className=\"skip-button \" id=\"skip-button\"  size={30}/></button>\r\n                       <button className=\"outline-none\" id=\"play-button\" onClick={()=>Setplaying(!playing)}>{!playing ? <BiPlay id=\"play-icon\" className=\"bg-white rounded-full\" size={40}/> : <BiPause id=\"play-icon\" className=\"bg-white rounded-full text-green-800 \" size={40}/>}</button>\r\n                       <button id=\"skipperbtn\" onClick={()=>skip(true)}><BiSkipNext className=\"skip-button  \" id=\"skip-button\" size={30}/></button>\r\n                       <button  id=\"skipperbtn\" onClick={()=>skip(false)}><BiSkipPrevious className=\"skip-button \" id=\"skip-button\"  size={25}/></button>\r\n                   </div>\r\n                    \r\n               \r\n                    <h2 className=\"text-md next-song\" id=\"next-song\" ><strong>Next up:</strong>{songs[nextsongindex].title}</h2>\r\n                \r\n                <div className=\"trademark\" style={playerstyle}>\r\n                    <p className=\"text-xs font-mono\"><i>a deadshot production</i></p>\r\n                </div>\r\n                \r\n            </div> \r\n            \r\n            </center>\r\n        \r\n        </div>\r\n       \r\n)\r\n\r\n}\r\n\r\nexport default Player"]},"metadata":{},"sourceType":"module"}